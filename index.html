<html>

	<head>

		<script type="text/javascript" src="./modular.this.js"></script>

		<link rel="stylesheet" href="style.css">

		<style>

		</style>
	</head>

	<body>

		<!--<div id="ui"></div>-->

		<svg width="960" height="600" id="ui"></svg>

		<script type="text/javascript">
			
			function start() {
				var osc = new modular.Oscillator(120);
				var osc2 = new modular.Oscillator(240);
				var lfo = new modular.Oscillator(10);
				lfo.name = 'lfo0';
				var gain = new modular.Gain();

				modular.Context.setUIElement('ui');

				modular.Nodule.patch(lfo, osc, 'frequency');

				modular.Nodule.patch(osc, gain);
				modular.Nodule.patch(osc2, gain);

				gain.knob('gain').value = 0.0;

				modular.Context.patchToDevice(gain, 1.0);

				modular.Context.refreshUI();

				gain.knob('gain').value = 0.1;
			}

			/*
			function test() {
				var AudioContext = window.AudioContext || window.webkitAudioContext;

				var audioCtx = new AudioContext();

				// create an normal oscillator to make sound
				var oscillator = audioCtx.createOscillator();

				// create a second oscillator that will be used as an LFO (Low-frequency
				// oscillator), and will control a parameter
				var lfo = audioCtx.createOscillator();

				// set the frequency of the second oscillator to a low number
				lfo.frequency.value = 2.0; // 2Hz: two oscillations par second

				// create a gain whose gain AudioParam will be controlled by the LFO
				var gain = audioCtx.createGain();

				// connect the LFO to the gain AudioParam. This means the value of the LFO
				// will not produce any audio, but will change the value of the gain instead
				lfo.connect(gain.gain);

				// connect the oscillator that will produce audio to the gain
				oscillator.connect(gain);

				// connect the gain to the destination so we hear sound
				gain.connect(audioCtx.destination);

				// start the oscillator that will produce audio
				oscillator.start();

				// start the oscillator that will modify the gain value
				lfo.start();				
			}
			*/

		</script>
		
	</body>

</html>