<html>

	<head>

		<script type="text/javascript" src="./modular.this.js"></script>

		<link rel="stylesheet" href="style.css">

		<style>

		</style>
	</head>

	<body>

		<!--<div id="ui"></div>-->

		<div id='ui' style="width: 960px; height: 800px;">
			<canvas width="128" height="200" id="canvas" class="waveform"></canvas>
			<div style="width: 100%;height: 10%" class="menu"></div>
			<div style="width: 960px; height: 600px; overflow: scroll;">
				<svg width="1500" height="960" class="patchzone"></svg>
			</div>
		</div>

		<script type="text/javascript">

		start();

			function createNodulesDropDownList() {
				
			}

			function start() {
				var osc = new modular.create('Oscillator', {frequency: 200});
				var lfo1 = new modular.create('Oscillator', {frequency: 0.5});
				var lfo2 = new modular.create('Oscillator', {frequency: 5});
				var gain = new modular.create('NativeGain');
				var lfo2Gain = new modular.create('NativeGain', {gain: 20.0});

				modular.setUIElement('ui');

				modular.patch(osc, gain);
				modular.patch(lfo2, lfo2Gain);
				modular.patch(lfo2Gain, osc, 'frequency');
				//modular.patch(lfo1, gain, 'gain');

				gain.knob('gain').value = 1.0;



				modular.patchToDevice(gain, 1.0);

				//modular.unpatch(osc, gain);
				//modular.unpatch(lfo2, lfo2Gain);

				modular.refreshUI();

				var canvas = document.getElementById('canvas');
				var rmsMonitor = new modular.show('RMSMeter', {knob: osc.knob('frequency'), canvasElement: canvas, frameRateFps: 50});
			}			


		</script>
		
	</body>

</html>